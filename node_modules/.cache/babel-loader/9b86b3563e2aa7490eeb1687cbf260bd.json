{"ast":null,"code":"import _objectSpread from\"C:/Users/ADMIN/Desktop/BaiHocReactjs/reactjs_bai5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/Users/ADMIN/Desktop/BaiHocReactjs/reactjs_bai5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/ADMIN/Desktop/BaiHocReactjs/reactjs_bai5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/ADMIN/Desktop/BaiHocReactjs/reactjs_bai5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Form,Input,Button,Checkbox,Cascader,DatePicker,InputNumber,Select}from'antd';import{quanLyRapService}from'../../../service/QuanLyRapService';import{useFormik}from'formik';import{quanLyDatVeService}from'../../../service/QuanLyDatVeService';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function Showtime(props){var _state$cumRapChieu;var _useState=useState({heThongRapChieu:[],cumRapChieu:[]}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var formik=useFormik({initialValues:{maPhim:props.match.params.id,ngayChieuGioChieu:'',maRap:'',giaVe:''},onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return quanLyDatVeService.taoLichChieu(values);case 3:result=_context.sent;alert(result.data.content);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));function onSubmit(_x){return _onSubmit.apply(this,arguments);}return onSubmit;}()});useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return quanLyRapService.layThongTinHeThongRap();case 3:result=_context2.sent;setState(_objectSpread(_objectSpread({},state),{},{heThongRapChieu:result.data.content}));_context2.next=9;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);})),[]);var handleChangeHeThongRap=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(values){var result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return quanLyRapService.layThongTinCumRapTheoHeThong(values);case 3:result=_context3.sent;setState(_objectSpread(_objectSpread({},state),{},{cumRapChieu:result.data.content}));_context3.next=9;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function handleChangeHeThongRap(_x2){return _ref2.apply(this,arguments);};}();var handleChangecumrap=function handleChangecumrap(values){formik.setFieldValue('maRap',values);};function onChangeDate(date,dateString){formik.setFieldValue('ngayChieuGioChieu',dateString);}var onOk=function onOk(){};var handleChangeInputNumber=function handleChangeInputNumber(value){formik.setFieldValue('giaVe',value);};var revertHeThongRap=function revertHeThongRap(){return state.heThongRapChieu.map(function(htr,index){return{label:htr.tenHeThongRap,value:htr.maHeThongRap};});};var film={};if(localStorage.getItem('filmParams')){film=JSON.parse(localStorage.getItem('filmParams'));}return/*#__PURE__*/_jsxs(Form,{name:\"basic\",initialValues:{remember:true},labelCol:{span:8},wrapperCol:{span:8},onSubmitCapture:formik.handleSubmit,children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-2xl\",children:[\"T\\u1EA1o l\\u1ECBch chi\\u1EBFu \",props.match.params.tenphim]}),/*#__PURE__*/_jsx(\"img\",{src:film.hinhAnh,alt:\"123\",width:100,height:200}),/*#__PURE__*/_jsx(Form.Item,{label:\"H\\u1EC7 th\\u1ED1ng r\\u1EA1p\",children:/*#__PURE__*/_jsx(Select,{options:revertHeThongRap(),placeholder:\"Please select\",onChange:handleChangeHeThongRap})}),/*#__PURE__*/_jsx(Form.Item,{label:\"C\\u1EE5m r\\u1EA1p\",children:/*#__PURE__*/_jsx(Select,{placeholder:\"Please select\",options:(_state$cumRapChieu=state.cumRapChieu)===null||_state$cumRapChieu===void 0?void 0:_state$cumRapChieu.map(function(cumrap,index){return{label:cumrap.tenCumRap,value:cumrap.maCumRap};}),onChange:handleChangecumrap})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Ng\\xE0y chi\\u1EBFu gi\\u1EDD chi\\u1EBFu\",children:/*#__PURE__*/_jsx(DatePicker,{format:\"DD/MM/YYYY hh:mm:ss\",onChange:onChangeDate,showTime:true,onOk:onOk})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Gi\\xE1 v\\xE9\",children:/*#__PURE__*/_jsx(InputNumber,{min:75000,max:150000,onChange:handleChangeInputNumber})}),/*#__PURE__*/_jsx(Form.Item,{wrapperCol:{offset:8,span:16},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",children:\"T\\u1EA1o l\\u1ECBch chi\\u1EBFu\"})})]});}","map":{"version":3,"sources":["C:/Users/ADMIN/Desktop/BaiHocReactjs/reactjs_bai5/src/pages/Admin/Showtime/Showtime.js"],"names":["React","useEffect","useState","Form","Input","Button","Checkbox","Cascader","DatePicker","InputNumber","Select","quanLyRapService","useFormik","quanLyDatVeService","Showtime","props","heThongRapChieu","cumRapChieu","state","setState","formik","initialValues","maPhim","match","params","id","ngayChieuGioChieu","maRap","giaVe","onSubmit","values","taoLichChieu","result","alert","data","content","layThongTinHeThongRap","handleChangeHeThongRap","layThongTinCumRapTheoHeThong","handleChangecumrap","setFieldValue","onChangeDate","date","dateString","onOk","handleChangeInputNumber","value","revertHeThongRap","map","htr","index","label","tenHeThongRap","maHeThongRap","film","localStorage","getItem","JSON","parse","remember","span","handleSubmit","tenphim","hinhAnh","cumrap","tenCumRap","maCumRap","offset"],"mappings":"4pBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,IAAT,CAAeC,KAAf,CAAsBC,MAAtB,CAA8BC,QAA9B,CAAwCC,QAAxC,CAAkDC,UAAlD,CAA8DC,WAA9D,CAA2EC,MAA3E,KAAyF,MAAzF,CACA,OAASC,gBAAT,KAAiC,mCAAjC,CACA,OAASC,SAAT,KAA0B,QAA1B,CACA,OAASC,kBAAT,KAAmC,qCAAnC,C,wFAGA,cAAe,SAASC,CAAAA,QAAT,CAAkBC,KAAlB,CAAyB,wBAEpC,cAA4Bb,QAAQ,CAAC,CACjCc,eAAe,CAAE,EADgB,CAEjCC,WAAW,CAAE,EAFoB,CAAD,CAApC,wCAAQC,KAAR,eAAeC,QAAf,eAIA,GAAMC,CAAAA,MAAM,CAAGR,SAAS,CAAC,CACrBS,aAAa,CAAE,CACXC,MAAM,CAAEP,KAAK,CAACQ,KAAN,CAAYC,MAAZ,CAAmBC,EADhB,CAEXC,iBAAiB,CAAE,EAFR,CAGXC,KAAK,CAAE,EAHI,CAIXC,KAAK,CAAE,EAJI,CADM,CAOrBC,QAAQ,kFAAE,iBAAOC,MAAP,mKAEiBjB,CAAAA,kBAAkB,CAACkB,YAAnB,CAAgCD,MAAhC,CAFjB,QAEEE,MAFF,eAGFC,KAAK,CAACD,MAAM,CAACE,IAAP,CAAYC,OAAb,CAAL,CAHE,iJAAF,oFAPa,CAAD,CAAxB,CAgBAlC,SAAS,sEAAC,2LAEiBU,CAAAA,gBAAgB,CAACyB,qBAAjB,EAFjB,QAEEJ,MAFF,gBAGFb,QAAQ,gCACDD,KADC,MAEJF,eAAe,CAAEgB,MAAM,CAACE,IAAP,CAAYC,OAFzB,GAAR,CAHE,uJAAD,GAUN,EAVM,CAAT,CAWA,GAAME,CAAAA,sBAAsB,2FAAG,kBAAOP,MAAP,yKAEJnB,CAAAA,gBAAgB,CAAC2B,4BAAjB,CAA8CR,MAA9C,CAFI,QAEnBE,MAFmB,gBAGvBb,QAAQ,gCACDD,KADC,MAEJD,WAAW,CAAEe,MAAM,CAACE,IAAP,CAAYC,OAFrB,GAAR,CAHuB,uJAAH,kBAAtBE,CAAAA,sBAAsB,8CAA5B,CAYA,GAAME,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACT,MAAD,CAAY,CACnCV,MAAM,CAACoB,aAAP,CAAqB,OAArB,CAA8BV,MAA9B,EACH,CAFD,CAGA,QAASW,CAAAA,YAAT,CAAsBC,IAAtB,CAA4BC,UAA5B,CAAwC,CACpCvB,MAAM,CAACoB,aAAP,CAAqB,mBAArB,CAA0CG,UAA1C,EACH,CACD,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CAElB,CAFD,CAGA,GAAMC,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,CAACC,KAAD,CAAW,CACvC1B,MAAM,CAACoB,aAAP,CAAqB,OAArB,CAA8BM,KAA9B,EACH,CAFD,CAGA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC3B,MAAO7B,CAAAA,KAAK,CAACF,eAAN,CAAsBgC,GAAtB,CAA0B,SAACC,GAAD,CAAMC,KAAN,CAAgB,CAC7C,MAAO,CAAEC,KAAK,CAAEF,GAAG,CAACG,aAAb,CAA4BN,KAAK,CAAEG,GAAG,CAACI,YAAvC,CAAP,CACH,CAFM,CAAP,CAGH,CAJD,CAKA,GAAIC,CAAAA,IAAI,CAAG,EAAX,CACA,GAAIC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAJ,CAAwC,CACpCF,IAAI,CAAGG,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAX,CAAP,CACH,CACD,mBACI,MAAC,IAAD,EACI,IAAI,CAAC,OADT,CAEI,aAAa,CAAE,CAAEG,QAAQ,CAAE,IAAZ,CAFnB,CAGI,QAAQ,CAAE,CAAEC,IAAI,CAAE,CAAR,CAHd,CAII,UAAU,CAAE,CAAEA,IAAI,CAAE,CAAR,CAJhB,CAKI,eAAe,CAAExC,MAAM,CAACyC,YAL5B,wBAOI,YAAI,SAAS,CAAC,UAAd,4CAAyC9C,KAAK,CAACQ,KAAN,CAAYC,MAAZ,CAAmBsC,OAA5D,GAPJ,cAQI,YAAK,GAAG,CAAER,IAAI,CAACS,OAAf,CAAwB,GAAG,CAAC,KAA5B,CAAkC,KAAK,CAAE,GAAzC,CAA8C,MAAM,CAAE,GAAtD,EARJ,cASI,KAAC,IAAD,CAAM,IAAN,EACI,KAAK,CAAC,6BADV,uBAII,KAAC,MAAD,EAAQ,OAAO,CAAEhB,gBAAgB,EAAjC,CAAqC,WAAW,CAAC,eAAjD,CAAiE,QAAQ,CAAEV,sBAA3E,EAJJ,EATJ,cAeI,KAAC,IAAD,CAAM,IAAN,EACI,KAAK,CAAC,mBADV,uBAII,KAAC,MAAD,EAAQ,WAAW,CAAC,eAApB,CAAoC,OAAO,qBAAEnB,KAAK,CAACD,WAAR,6CAAE,mBAAmB+B,GAAnB,CAAuB,SAACgB,MAAD,CAASd,KAAT,QAAoB,CAAEC,KAAK,CAAEa,MAAM,CAACC,SAAhB,CAA2BnB,KAAK,CAAEkB,MAAM,CAACE,QAAzC,CAApB,EAAvB,CAA7C,CAA+I,QAAQ,CAAE3B,kBAAzJ,EAJJ,EAfJ,cAqBI,KAAC,IAAD,CAAM,IAAN,EACI,KAAK,CAAC,wCADV,uBAII,KAAC,UAAD,EAAY,MAAM,CAAC,qBAAnB,CAAyC,QAAQ,CAAEE,YAAnD,CAAiE,QAAQ,KAAzE,CAA0E,IAAI,CAAEG,IAAhF,EAJJ,EArBJ,cA2BI,KAAC,IAAD,CAAM,IAAN,EACI,KAAK,CAAC,cADV,uBAII,KAAC,WAAD,EAAa,GAAG,CAAE,KAAlB,CAAyB,GAAG,CAAE,MAA9B,CAAsC,QAAQ,CAAEC,uBAAhD,EAJJ,EA3BJ,cAoCI,KAAC,IAAD,CAAM,IAAN,EAAW,UAAU,CAAE,CAAEsB,MAAM,CAAE,CAAV,CAAaP,IAAI,CAAE,EAAnB,CAAvB,uBACI,KAAC,MAAD,EAAQ,IAAI,CAAC,SAAb,CAAuB,QAAQ,CAAC,QAAhC,2CADJ,EApCJ,GADJ,CA4CH","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Form, Input, Button, Checkbox, Cascader, DatePicker, InputNumber, Select } from 'antd';\r\nimport { quanLyRapService } from '../../../service/QuanLyRapService';\r\nimport { useFormik } from 'formik';\r\nimport { quanLyDatVeService } from '../../../service/QuanLyDatVeService';\r\n\r\n\r\nexport default function Showtime(props) {\r\n\r\n    const [ state, setState ] = useState({\r\n        heThongRapChieu: [],\r\n        cumRapChieu: []\r\n    });\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            maPhim: props.match.params.id,\r\n            ngayChieuGioChieu: '',\r\n            maRap: '',\r\n            giaVe: ''\r\n        },\r\n        onSubmit: async (values) => {\r\n            try {\r\n                let result = await quanLyDatVeService.taoLichChieu(values);\r\n                alert(result.data.content);\r\n            } catch (error) {\r\n\r\n            }\r\n        }\r\n    });\r\n    useEffect(async () => {\r\n        try {\r\n            let result = await quanLyRapService.layThongTinHeThongRap();\r\n            setState({\r\n                ...state,\r\n                heThongRapChieu: result.data.content\r\n            });\r\n        } catch (err) {\r\n\r\n        }\r\n    }, []);\r\n    const handleChangeHeThongRap = async (values) => {\r\n        try {\r\n            let result = await quanLyRapService.layThongTinCumRapTheoHeThong(values);\r\n            setState({\r\n                ...state,\r\n                cumRapChieu: result.data.content\r\n            });\r\n        } catch (error) {\r\n\r\n        }\r\n\r\n    };\r\n    const handleChangecumrap = (values) => {\r\n        formik.setFieldValue('maRap', values);\r\n    };\r\n    function onChangeDate(date, dateString) {\r\n        formik.setFieldValue('ngayChieuGioChieu', dateString);\r\n    }\r\n    const onOk = () => {\r\n\r\n    };\r\n    const handleChangeInputNumber = (value) => {\r\n        formik.setFieldValue('giaVe', value);\r\n    };\r\n    const revertHeThongRap = () => {\r\n        return state.heThongRapChieu.map((htr, index) => {\r\n            return { label: htr.tenHeThongRap, value: htr.maHeThongRap };\r\n        });\r\n    };\r\n    let film = {};\r\n    if (localStorage.getItem('filmParams')) {\r\n        film = JSON.parse(localStorage.getItem('filmParams'));\r\n    }\r\n    return (\r\n        <Form\r\n            name=\"basic\"\r\n            initialValues={{ remember: true }}\r\n            labelCol={{ span: 8 }}\r\n            wrapperCol={{ span: 8 }}\r\n            onSubmitCapture={formik.handleSubmit}\r\n        >\r\n            <h3 className='text-2xl'>Tạo lịch chiếu {props.match.params.tenphim}</h3>\r\n            <img src={film.hinhAnh} alt='123' width={100} height={200} />\r\n            <Form.Item\r\n                label=\"Hệ thống rạp\"\r\n\r\n            >\r\n                <Select options={revertHeThongRap()} placeholder=\"Please select\" onChange={handleChangeHeThongRap} />\r\n            </Form.Item>\r\n            <Form.Item\r\n                label=\"Cụm rạp\"\r\n\r\n            >\r\n                <Select placeholder=\"Please select\" options={state.cumRapChieu?.map((cumrap, index) => ({ label: cumrap.tenCumRap, value: cumrap.maCumRap }))} onChange={handleChangecumrap} />\r\n            </Form.Item>\r\n            <Form.Item\r\n                label=\"Ngày chiếu giờ chiếu\"\r\n\r\n            >\r\n                <DatePicker format=\"DD/MM/YYYY hh:mm:ss\" onChange={onChangeDate} showTime onOk={onOk} />\r\n            </Form.Item>\r\n            <Form.Item\r\n                label=\"Giá vé\"\r\n\r\n            >\r\n                <InputNumber min={75000} max={150000} onChange={handleChangeInputNumber} />\r\n            </Form.Item>\r\n\r\n\r\n\r\n            <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\r\n                <Button type=\"primary\" htmlType=\"submit\">\r\n                    Tạo lịch chiếu\r\n                </Button>\r\n            </Form.Item>\r\n        </Form>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}